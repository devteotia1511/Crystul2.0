{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///Users/devteotia/Downloads/Crystul2.0/lib/env-validation.ts"],"sourcesContent":["/**\n * Environment Variable Validation\n * \n * This utility validates that all required environment variables are present\n * and provides helpful error messages if any are missing.\n */\n\nexport function validateEnvironmentVariables() {\n  const requiredVars = [\n    'NEXTAUTH_URL',\n    'NEXTAUTH_SECRET',\n    'GOOGLE_CLIENT_ID',\n    'GOOGLE_CLIENT_SECRET',\n    'NEXT_PUBLIC_FIREBASE_API_KEY',\n    'NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN',\n    'NEXT_PUBLIC_FIREBASE_PROJECT_ID',\n    'NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET',\n    'NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID',\n    'NEXT_PUBLIC_FIREBASE_APP_ID',\n    'MONGODB_URI'\n  ];\n\n  const missingVars: string[] = [];\n  const placeholderVars: string[] = [];\n\n  for (const varName of requiredVars) {\n    const value = process.env[varName];\n    \n    if (!value) {\n      missingVars.push(varName);\n    } else if (value.includes('your-') || value.includes('placeholder')) {\n      placeholderVars.push(varName);\n    }\n  }\n\n  if (missingVars.length > 0) {\n    throw new Error(`Missing required environment variables: ${missingVars.join(', ')}`);\n  }\n\n  // Only warn about placeholder values in development, don't throw\n  if (placeholderVars.length > 0) {\n    console.warn(`⚠️  Environment variables contain placeholder values: ${placeholderVars.join(', ')}. Please set actual values for production.`);\n  }\n}\n\nexport function validateEnvironmentVariablesOnStartup() {\n  if (typeof window === 'undefined') {\n    // Only run on server-side\n    try {\n      validateEnvironmentVariables();\n    } catch (error: unknown) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n      console.error('Environment validation failed:', errorMessage);\n      // Don't throw in production to avoid breaking the app\n      if (process.env.NODE_ENV === 'development') {\n        console.warn('⚠️  Continuing with placeholder values for development...');\n      }\n    }\n  }\n}\n\nexport function getRequiredEnvVar(name: string): string {\n  const value = process.env[name];\n  if (!value) {\n    throw new Error(`Environment variable ${name} is required but not set`);\n  }\n  \n  // In development, allow placeholder values but warn\n  if (value.includes('your-') || value.includes('placeholder')) {\n    console.warn(`⚠️  Environment variable ${name} contains placeholder value. This will not work in production.`);\n    // For development, return the placeholder value instead of throwing\n    if (process.env.NODE_ENV === 'development') {\n      return value;\n    }\n  }\n  \n  return value;\n}\n\nexport function getOptionalEnvVar(name: string, defaultValue: string = ''): string {\n  return process.env[name] || defaultValue;\n}"],"names":[],"mappings":"AAAA;;;;;CAKC;;;;;;;;;;AAEM,SAAS;IACd,MAAM,eAAe;QACnB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAED,MAAM,cAAwB,EAAE;IAChC,MAAM,kBAA4B,EAAE;IAEpC,KAAK,MAAM,WAAW,aAAc;QAClC,MAAM,QAAQ,QAAQ,GAAG,CAAC,QAAQ;QAElC,IAAI,CAAC,OAAO;YACV,YAAY,IAAI,CAAC;QACnB,OAAO,IAAI,MAAM,QAAQ,CAAC,YAAY,MAAM,QAAQ,CAAC,gBAAgB;YACnE,gBAAgB,IAAI,CAAC;QACvB;IACF;IAEA,IAAI,YAAY,MAAM,GAAG,GAAG;QAC1B,MAAM,IAAI,MAAM,CAAC,wCAAwC,EAAE,YAAY,IAAI,CAAC,OAAO;IACrF;IAEA,iEAAiE;IACjE,IAAI,gBAAgB,MAAM,GAAG,GAAG;QAC9B,QAAQ,IAAI,CAAC,CAAC,sDAAsD,EAAE,gBAAgB,IAAI,CAAC,MAAM,0CAA0C,CAAC;IAC9I;AACF;AAEO,SAAS;IACd,wCAAmC;QACjC,0BAA0B;QAC1B,IAAI;YACF;QACF,EAAE,OAAO,OAAgB;YACvB,MAAM,eAAe,iBAAiB,QAAQ,MAAM,OAAO,GAAG;YAC9D,QAAQ,KAAK,CAAC,kCAAkC;YAChD,sDAAsD;YACtD,wCAA4C;gBAC1C,QAAQ,IAAI,CAAC;YACf;QACF;IACF;AACF;AAEO,SAAS,kBAAkB,IAAY;IAC5C,MAAM,QAAQ,QAAQ,GAAG,CAAC,KAAK;IAC/B,IAAI,CAAC,OAAO;QACV,MAAM,IAAI,MAAM,CAAC,qBAAqB,EAAE,KAAK,wBAAwB,CAAC;IACxE;IAEA,oDAAoD;IACpD,IAAI,MAAM,QAAQ,CAAC,YAAY,MAAM,QAAQ,CAAC,gBAAgB;QAC5D,QAAQ,IAAI,CAAC,CAAC,yBAAyB,EAAE,KAAK,8DAA8D,CAAC;QAC7G,oEAAoE;QACpE,wCAA4C;YAC1C,OAAO;QACT;IACF;IAEA,OAAO;AACT;AAEO,SAAS,kBAAkB,IAAY,EAAE,eAAuB,EAAE;IACvE,OAAO,QAAQ,GAAG,CAAC,KAAK,IAAI;AAC9B"}},
    {"offset": {"line": 196, "column": 0}, "map": {"version":3,"sources":["file:///Users/devteotia/Downloads/Crystul2.0/lib/mongodb.ts"],"sourcesContent":["import mongoose from 'mongoose';\nimport { getRequiredEnvVar } from './env-validation';\n\nconst MONGODB_URI = getRequiredEnvVar('MONGODB_URI');\n\nlet cached = (global as any).mongoose;\n\nif (!cached) {\n  cached = {\n    conn: null,\n    promise: null,\n  };\n  (global as any).mongoose = cached;\n}\n\nasync function dbConnect() {\n  // In development, if MongoDB URI is a placeholder, skip connection\n  if (process.env.NODE_ENV === 'development' && \n      (MONGODB_URI.includes('your-') || MONGODB_URI.includes('placeholder'))) {\n    console.warn('⚠️  Skipping MongoDB connection in development due to placeholder URI');\n    return null;\n  }\n\n  if (cached.conn) return cached.conn;\n\n  if (!cached.promise) {\n    cached.promise = mongoose.connect(MONGODB_URI, {\n      bufferCommands: false,\n    }).then((mongoose) => mongoose);\n  }\n\n  cached.conn = await cached.promise;\n  return cached.conn;\n}\n\nexport default dbConnect;"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,cAAc,IAAA,+IAAiB,EAAC;AAEtC,IAAI,SAAS,yDAAgB,QAAQ;AAErC,IAAI,CAAC,QAAQ;IACX,SAAS;QACP,MAAM;QACN,SAAS;IACX;IACA,yDAAgB,QAAQ,GAAG;AAC7B;AAEA,eAAe;IACb,mEAAmE;IACnE,IAAI,oDAAyB,iBACzB,CAAC,YAAY,QAAQ,CAAC,YAAY,YAAY,QAAQ,CAAC,cAAc,GAAG;QAC1E,QAAQ,IAAI,CAAC;QACb,OAAO;IACT;IAEA,IAAI,OAAO,IAAI,EAAE,OAAO,OAAO,IAAI;IAEnC,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,OAAO,OAAO,GAAG,oHAAQ,CAAC,OAAO,CAAC,aAAa;YAC7C,gBAAgB;QAClB,GAAG,IAAI,CAAC,CAAC,WAAa;IACxB;IAEA,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IAClC,OAAO,OAAO,IAAI;AACpB;uCAEe"}},
    {"offset": {"line": 233, "column": 0}, "map": {"version":3,"sources":["file:///Users/devteotia/Downloads/Crystul2.0/models/User.ts"],"sourcesContent":["import mongoose from 'mongoose';\n\nconst userSchema = new mongoose.Schema({\n  name: {\n    type: String,\n    required: true\n  },\n  email: {\n    type: String,\n    required: true,\n    unique: true,\n    lowercase: true\n  },\n  password: {\n    type: String,\n    required: false // Make password optional for Google users\n  },\n  avatar: {\n    type: String\n  },\n  bio: {\n    type: String\n  },\n  skills: [{\n    type: String\n  }],\n  interests: [{\n    type: String\n  }],\n  experience: {\n    type: String,\n    enum: ['Beginner', 'Intermediate', 'Expert'],\n    default: 'Beginner'\n  },\n  lookingFor: [{\n    type: String\n  }],\n  location: {\n    type: String\n  },\n  timezone: {\n    type: String\n  },\n  isPublic: {\n    type: Boolean,\n    default: true\n  },\n  connections: [{\n    type: String\n  }],\n  createdAt: {\n    type: Date,\n    default: Date.now\n  }\n});\n\nexport default mongoose.models.User || mongoose.model('User', userSchema);"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,aAAa,IAAI,oHAAQ,CAAC,MAAM,CAAC;IACrC,MAAM;QACJ,MAAM;QACN,UAAU;IACZ;IACA,OAAO;QACL,MAAM;QACN,UAAU;QACV,QAAQ;QACR,WAAW;IACb;IACA,UAAU;QACR,MAAM;QACN,UAAU,MAAM,0CAA0C;IAC5D;IACA,QAAQ;QACN,MAAM;IACR;IACA,KAAK;QACH,MAAM;IACR;IACA,QAAQ;QAAC;YACP,MAAM;QACR;KAAE;IACF,WAAW;QAAC;YACV,MAAM;QACR;KAAE;IACF,YAAY;QACV,MAAM;QACN,MAAM;YAAC;YAAY;YAAgB;SAAS;QAC5C,SAAS;IACX;IACA,YAAY;QAAC;YACX,MAAM;QACR;KAAE;IACF,UAAU;QACR,MAAM;IACR;IACA,UAAU;QACR,MAAM;IACR;IACA,UAAU;QACR,MAAM;QACN,SAAS;IACX;IACA,aAAa;QAAC;YACZ,MAAM;QACR;KAAE;IACF,WAAW;QACT,MAAM;QACN,SAAS,KAAK,GAAG;IACnB;AACF;uCAEe,oHAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,oHAAQ,CAAC,KAAK,CAAC,QAAQ"}},
    {"offset": {"line": 309, "column": 0}, "map": {"version":3,"sources":["file:///Users/devteotia/Downloads/Crystul2.0/app/api/auth/%5B...nextauth%5D/route.ts"],"sourcesContent":["// app/api/auth/[...nextauth]/route.ts\n\nimport NextAuth, { NextAuthOptions } from \"next-auth\";\nimport GoogleProvider from \"next-auth/providers/google\";\nimport CredentialsProvider from \"next-auth/providers/credentials\";\nimport { getOptionalEnvVar } from \"@/lib/env-validation\";\nimport dbConnect from \"@/lib/mongodb\";\nimport User from \"@/models/User\";\nimport bcrypt from \"bcryptjs\";\n\n// Keep 'export' here for authOptions\nexport const authOptions: NextAuthOptions = { // 'authOptions' is now exported again\n  providers: [\n    ...(getOptionalEnvVar(\"GOOGLE_CLIENT_ID\", \"\") && getOptionalEnvVar(\"GOOGLE_CLIENT_SECRET\", \"\") ? [\n      GoogleProvider({\n        clientId: getOptionalEnvVar(\"GOOGLE_CLIENT_ID\", \"\"),\n        clientSecret: getOptionalEnvVar(\"GOOGLE_CLIENT_SECRET\", \"\"),\n      })\n    ] : []),\n    CredentialsProvider({\n      name: \"credentials\",\n      credentials: {\n        email: { label: \"Email\", type: \"email\" },\n        password: { label: \"Password\", type: \"password\" }\n      },\n      async authorize(credentials) {\n        if (!credentials?.email || !credentials?.password) {\n          return null;\n        }\n\n        try {\n          const dbConnection = await dbConnect();\n          \n          // If no database connection (development with placeholder), allow demo login\n          if (!dbConnection) {\n            console.warn('⚠️  No database connection in development, allowing demo login');\n            // For development, allow any email/password combination\n            return {\n              id: 'demo-user',\n              email: credentials.email,\n              name: 'Demo User',\n              image: null\n            };\n          }\n          \n          const user = await User.findOne({ email: credentials.email });\n          \n          if (!user) {\n            return null;\n          }\n\n          // Verify password\n          const isValidPassword = await bcrypt.compare(credentials.password, user.password);\n          if (!isValidPassword) {\n            return null;\n          }\n\n          return {\n            id: user._id.toString(),\n            email: user.email,\n            name: user.name,\n            image: user.avatar\n          };\n        } catch (error) {\n          console.error(\"Auth error:\", error);\n          return null;\n        }\n      }\n    })\n  ],\n  session: {\n    strategy: \"jwt\" as const,\n  },\n  callbacks: {\n    async signIn({ user, account, profile }) {\n      if (account?.provider === 'google') {\n        try {\n          const dbConnection = await dbConnect();\n          if (dbConnection) {\n            const existingUser = await User.findOne({ email: user.email });\n            if (!existingUser) {\n              await User.create({\n                name: user.name,\n                email: user.email,\n                avatar: user.image,\n                skills: [],\n                interests: [],\n                experience: 'Beginner',\n                lookingFor: [],\n                isPublic: true,\n                createdAt: new Date(),\n              });\n            }\n          }\n        } catch (err) {\n          console.error('Google sign-in user creation error:', err);\n          return false; // Prevents redirect to dashboard, shows error page\n        }\n      }\n      return true;\n    },\n    async jwt({ token, user, account }: any) {\n      if (account && user) {\n        token.accessToken = account.access_token;\n      }\n      return token;\n    },\n    async session({ session, token }: any) {\n      session.accessToken = token.accessToken;\n      return session;\n    },\n    async redirect({ url, baseUrl }) {\n      // Allows relative callback URLs\n      if (url.startsWith(\"/\")) return `${baseUrl}${url}`;\n      // Allows callback URLs on the same origin\n      else if (new URL(url).origin === baseUrl) return url;\n      return baseUrl;\n    },\n  },\n  pages: {\n    signIn: \"/auth/login\",\n    signOut: \"/\",\n  },\n};\n\nconst handler = NextAuth(authOptions);\n\n// Export GET and POST for the route handler\nexport { handler as GET, handler as POST };\n\n// No need to explicitly export authOptions again if it's already declared with 'export const'"],"names":[],"mappings":"AAAA,sCAAsC;;;;;;;;;AAEtC;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AAGO,MAAM,cAA+B;IAC1C,WAAW;WACL,IAAA,+IAAiB,EAAC,oBAAoB,OAAO,IAAA,+IAAiB,EAAC,wBAAwB,MAAM;YAC/F,IAAA,gKAAc,EAAC;gBACb,UAAU,IAAA,+IAAiB,EAAC,oBAAoB;gBAChD,cAAc,IAAA,+IAAiB,EAAC,wBAAwB;YAC1D;SACD,GAAG,EAAE;QACN,IAAA,qKAAmB,EAAC;YAClB,MAAM;YACN,aAAa;gBACX,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAQ;gBACvC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YAClD;YACA,MAAM,WAAU,WAAW;gBACzB,IAAI,CAAC,aAAa,SAAS,CAAC,aAAa,UAAU;oBACjD,OAAO;gBACT;gBAEA,IAAI;oBACF,MAAM,eAAe,MAAM,IAAA,2HAAS;oBAEpC,6EAA6E;oBAC7E,IAAI,CAAC,cAAc;wBACjB,QAAQ,IAAI,CAAC;wBACb,wDAAwD;wBACxD,OAAO;4BACL,IAAI;4BACJ,OAAO,YAAY,KAAK;4BACxB,MAAM;4BACN,OAAO;wBACT;oBACF;oBAEA,MAAM,OAAO,MAAM,2HAAI,CAAC,OAAO,CAAC;wBAAE,OAAO,YAAY,KAAK;oBAAC;oBAE3D,IAAI,CAAC,MAAM;wBACT,OAAO;oBACT;oBAEA,kBAAkB;oBAClB,MAAM,kBAAkB,MAAM,8IAAM,CAAC,OAAO,CAAC,YAAY,QAAQ,EAAE,KAAK,QAAQ;oBAChF,IAAI,CAAC,iBAAiB;wBACpB,OAAO;oBACT;oBAEA,OAAO;wBACL,IAAI,KAAK,GAAG,CAAC,QAAQ;wBACrB,OAAO,KAAK,KAAK;wBACjB,MAAM,KAAK,IAAI;wBACf,OAAO,KAAK,MAAM;oBACpB;gBACF,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,eAAe;oBAC7B,OAAO;gBACT;YACF;QACF;KACD;IACD,SAAS;QACP,UAAU;IACZ;IACA,WAAW;QACT,MAAM,QAAO,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE;YACrC,IAAI,SAAS,aAAa,UAAU;gBAClC,IAAI;oBACF,MAAM,eAAe,MAAM,IAAA,2HAAS;oBACpC,IAAI,cAAc;wBAChB,MAAM,eAAe,MAAM,2HAAI,CAAC,OAAO,CAAC;4BAAE,OAAO,KAAK,KAAK;wBAAC;wBAC5D,IAAI,CAAC,cAAc;4BACjB,MAAM,2HAAI,CAAC,MAAM,CAAC;gCAChB,MAAM,KAAK,IAAI;gCACf,OAAO,KAAK,KAAK;gCACjB,QAAQ,KAAK,KAAK;gCAClB,QAAQ,EAAE;gCACV,WAAW,EAAE;gCACb,YAAY;gCACZ,YAAY,EAAE;gCACd,UAAU;gCACV,WAAW,IAAI;4BACjB;wBACF;oBACF;gBACF,EAAE,OAAO,KAAK;oBACZ,QAAQ,KAAK,CAAC,uCAAuC;oBACrD,OAAO,OAAO,mDAAmD;gBACnE;YACF;YACA,OAAO;QACT;QACA,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAO;YACrC,IAAI,WAAW,MAAM;gBACnB,MAAM,WAAW,GAAG,QAAQ,YAAY;YAC1C;YACA,OAAO;QACT;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAO;YACnC,QAAQ,WAAW,GAAG,MAAM,WAAW;YACvC,OAAO;QACT;QACA,MAAM,UAAS,EAAE,GAAG,EAAE,OAAO,EAAE;YAC7B,gCAAgC;YAChC,IAAI,IAAI,UAAU,CAAC,MAAM,OAAO,GAAG,UAAU,KAAK;iBAE7C,IAAI,IAAI,IAAI,KAAK,MAAM,KAAK,SAAS,OAAO;YACjD,OAAO;QACT;IACF;IACA,OAAO;QACL,QAAQ;QACR,SAAS;IACX;AACF;AAEA,MAAM,UAAU,IAAA,kJAAQ,EAAC;;CAKzB,8FAA8F"}}]
}